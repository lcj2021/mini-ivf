
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Remote Call Framework (RCF) - Delta V Software</title>
    <!-- Bootstrap core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <!-- JL: Using timestamp here to prevent css file from being cached -->
    <link href="../css/website.css?<?php echo time(); ?>" rel="stylesheet" />
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
    <link href="doxygenBase.css" rel="stylesheet" type="text/css" />
    <link href="doxyStylesheet.css" rel="stylesheet" type="text/css"/>
<link href="doxySidebarFixes.css" rel="stylesheet" type="text/css"/>
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" />
    <script type="text/javascript" src="doxy-boot.js"></script>
</head>
<body style="padding-top: 0px">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light navbar-fixed-top" style="top: 20px;">
        <!-- <nav class="navbar navbar-expand-lg fixed-top"> -->
        <div class="container">
            <a class="navbar-brand" href="index.html"><img src="RCF_Logo_70px.png" height="70" /> </img></a>
            <!--
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item" style="padding-top: 0px;">
                        <a class="nav-link" href="../index.html"><i class="fa fa-home"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Documentation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../download.html">Download</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../licensing.html">Licensing</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../contact.html">Contact</a>
                    </li>
                </ul>
            </div>
                -->
        </div>
    </nav>
        <div class="container">
        <div class="row">
            <div class="col-lg-12">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Remote Call Framework 3.4
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_pub_sub.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Publish/Subscribe </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#Publishers">Publishers</a></li>
<li class="level1"><a href="#Subscribers">Subscribers</a></li>
<li class="level1"><a href="#PubSubAccessControl">Access Control</a></li>
</ul>
</div>
<div class="textblock"><p>RCF provides a built in publish/subscribe implementation.</p>
<p>Publish/subscribe is a messaging paradigm where publishers send out messsages to groups of subscribers. Rather than publishers being aware of individual subscribers and sending messages directly to them, publishers instead categorize their messages into topics, and subscribers choose which topics to receive messages from. When a publisher publishes a message on a particular topic, all subscribers subscribing to that topic will receive the message.</p>
<p>Publish/subscribe can be used in the presence of firewalls and NAT's. The only network topology requirement is that the subscriber must be able to initiate a network connection to the publisher. Publishers will never attempt to establish network connections to their subscribers.</p>
<h1><a class="anchor" id="Publishers"></a>
Publishers</h1>
<p>To create a publisher, use <code><a class="el" href="class_r_c_f_1_1_rcf_server.html#a3897d6a968fc0d9c4c04ae2d3c1911f8" title="Creates a publisher instance for the given RCF interface. ">RCF::RcfServer::createPublisher</a>&lt;&gt;()</code>:</p>
<div class="fragment"><div class="line">    <a class="code" href="class_r_c_f_1_1_rcf_server.html">RCF::RcfServer</a> pubServer( <a class="code" href="class_r_c_f_1_1_tcp_endpoint.html">RCF::TcpEndpoint</a>(50001) );</div><div class="line">    pubServer.start();</div><div class="line"></div><div class="line">    <span class="keyword">typedef</span> <a class="code" href="class_r_c_f_1_1_publisher.html">RCF::Publisher&lt;I_PrintService&gt;</a> PrintServicePublisher;</div><div class="line">    <span class="keyword">typedef</span> std::shared_ptr&lt; PrintServicePublisher &gt; PrintServicePublisherPtr;</div><div class="line">    PrintServicePublisherPtr publisherPtr = pubServer.createPublisher&lt;I_PrintService&gt;();</div></div><!-- fragment --><p> This will create a publisher with a default topic name. The default topic name is the runtime name of the RCF interface passed to <code><a class="el" href="class_r_c_f_1_1_rcf_server.html#a3897d6a968fc0d9c4c04ae2d3c1911f8" title="Creates a publisher instance for the given RCF interface. ">RCF::RcfServer::createPublisher</a>&lt;&gt;()</code> (in this case <code>"I_PrintService"</code>).</p>
<p>The topic name can also be set explicitly. For example, to create two publishers, with different topic names, using the same RCF interface:</p>
<div class="fragment"><div class="line">    <a class="code" href="class_r_c_f_1_1_publisher_parms.html">RCF::PublisherParms</a> pubParms;</div><div class="line">    pubParms.<a class="code" href="class_r_c_f_1_1_publisher_parms.html#abd19c04b5e438cc47d0e0ab5bf4edb55">setTopicName</a>(<span class="stringliteral">&quot;PrintService_Topic_1&quot;</span>);</div><div class="line">    PrintServicePublisherPtr publisher1Ptr = pubServer.createPublisher&lt;I_PrintService&gt;(pubParms);</div><div class="line"></div><div class="line">    pubParms.<a class="code" href="class_r_c_f_1_1_publisher_parms.html#abd19c04b5e438cc47d0e0ab5bf4edb55">setTopicName</a>(<span class="stringliteral">&quot;PrintService_Topic_2&quot;</span>);</div><div class="line">    PrintServicePublisherPtr publisher2Ptr = pubServer.createPublisher&lt;I_PrintService&gt;(pubParms);</div></div><!-- fragment --><p> The <code><a class="el" href="class_r_c_f_1_1_publisher.html" title="Represents a single publisher within a RcfServer. To create a publisher, use RcfServer::createPublish...">RCF::Publisher</a>&lt;&gt;</code> object returned by <code><a class="el" href="class_r_c_f_1_1_rcf_server.html#a3897d6a968fc0d9c4c04ae2d3c1911f8" title="Creates a publisher instance for the given RCF interface. ">RCF::RcfServer::createPublisher</a>&lt;&gt;()</code> is used to publish remote calls. Published remote calls always have one-way semantics, and are received by all subscribers currently subscribing to that publishing topic. To publish a call, use <code><a class="el" href="class_r_c_f_1_1_publisher.html" title="Represents a single publisher within a RcfServer. To create a publisher, use RcfServer::createPublish...">RCF::Publisher</a>&lt;&gt;::publish()</code>:</p>
<div class="fragment"><div class="line">    publisherPtr-&gt;publish().Print(<span class="stringliteral">&quot;First published message.&quot;</span>);</div><div class="line">    publisherPtr-&gt;publish().Print(<span class="stringliteral">&quot;Second published message.&quot;</span>);</div></div><!-- fragment --><p> The publishing topic is closed, and all of its subscribers disconnected, when the <code><a class="el" href="class_r_c_f_1_1_publisher.html" title="Represents a single publisher within a RcfServer. To create a publisher, use RcfServer::createPublish...">RCF::Publisher</a>&lt;&gt;</code> object is destroyed, or when <code><a class="el" href="class_r_c_f_1_1_publisher.html" title="Represents a single publisher within a RcfServer. To create a publisher, use RcfServer::createPublish...">RCF::Publisher</a>&lt;&gt;::close()</code> is called.</p>
<div class="fragment"><div class="line">    <span class="comment">// Close the publishing topic. All subscribers will be disconnected.</span></div><div class="line">    publisherPtr-&gt;close();</div></div><!-- fragment --><h1><a class="anchor" id="Subscribers"></a>
Subscribers</h1>
<p>To subscribe to a publisher, use <code><a class="el" href="class_r_c_f_1_1_rcf_server.html#af8e3e5d679e47140e1560fa2915252d1" title="Creates a subscription to a remote RCF publisher. ">RCF::RcfServer::createSubscription</a>&lt;&gt;()</code>:</p>
<div class="fragment"><div class="line">    <a class="code" href="class_r_c_f_1_1_rcf_server.html">RCF::RcfServer</a> subServer( <a class="code" href="class_r_c_f_1_1_tcp_endpoint.html">RCF::TcpEndpoint</a>(-1) );</div><div class="line">    subServer.start();</div><div class="line"></div><div class="line">    PrintService printService;</div><div class="line">    <a class="code" href="class_r_c_f_1_1_subscription_parms.html">RCF::SubscriptionParms</a> subParms;</div><div class="line">    subParms.<a class="code" href="class_r_c_f_1_1_subscription_parms.html#ab0c6716e4e12b03440c76572934d2280">setPublisherEndpoint</a>( <a class="code" href="class_r_c_f_1_1_tcp_endpoint.html">RCF::TcpEndpoint</a>(50001) );</div><div class="line"></div><div class="line">    RCF::SubscriptionPtr subscriptionPtr = subServer.createSubscription&lt;I_PrintService&gt;(</div><div class="line">        printService, </div><div class="line">        subParms);</div></div><!-- fragment --><p> As for publishers, the topic name defaults to the runtime name of the RCF interface (in this case <code>"I_PrintService"</code>). The topic name can also be specified explicitly:</p>
<div class="fragment"><div class="line">        PrintService printService;</div><div class="line"></div><div class="line">        <a class="code" href="class_r_c_f_1_1_subscription_parms.html">RCF::SubscriptionParms</a> subParms;</div><div class="line">        subParms.<a class="code" href="class_r_c_f_1_1_subscription_parms.html#ab0c6716e4e12b03440c76572934d2280">setPublisherEndpoint</a>( <a class="code" href="class_r_c_f_1_1_tcp_endpoint.html">RCF::TcpEndpoint</a>(50001) );</div><div class="line">        subParms.<a class="code" href="class_r_c_f_1_1_subscription_parms.html#a1e35f1b4e847af1a440546a5c864e78c">setTopicName</a>(<span class="stringliteral">&quot;PrintService_Topic1&quot;</span>);</div><div class="line"></div><div class="line">        RCF::SubscriptionPtr subscription1Ptr = subServer.createSubscription&lt;I_PrintService&gt;(</div><div class="line">            printService, </div><div class="line">            subParms);</div><div class="line"></div><div class="line">        subParms.<a class="code" href="class_r_c_f_1_1_subscription_parms.html#a1e35f1b4e847af1a440546a5c864e78c">setTopicName</a>(<span class="stringliteral">&quot;PrintService_Topic2&quot;</span>);</div><div class="line"></div><div class="line">        RCF::SubscriptionPtr subscription2Ptr = subServer.createSubscription&lt;I_PrintService&gt;(</div><div class="line">            printService,</div><div class="line">            subParms);</div></div><!-- fragment --><p> The first parameter passed to <code><a class="el" href="class_r_c_f_1_1_rcf_server.html#af8e3e5d679e47140e1560fa2915252d1" title="Creates a subscription to a remote RCF publisher. ">RCF::RcfServer::createSubscription</a>&lt;&gt;()</code> is the object which will receive the published messages. It is the applications responsibility to make sure this object is not destroyed while the subscription is still connected.</p>
<p>A disconnect callback can be provided, which will be called if the subscriber is disconnected:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> onSubscriptionDisconnected(<a class="code" href="class_r_c_f_1_1_rcf_session.html">RCF::RcfSession</a> &amp; session)</div><div class="line">{</div><div class="line">    <span class="comment">// Handle subscription disconnection here.</span></div><div class="line">    <span class="comment">// ...</span></div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line">        PrintService printService;</div><div class="line"></div><div class="line">        <a class="code" href="class_r_c_f_1_1_subscription_parms.html">RCF::SubscriptionParms</a> subParms;</div><div class="line">        subParms.<a class="code" href="class_r_c_f_1_1_subscription_parms.html#ab0c6716e4e12b03440c76572934d2280">setPublisherEndpoint</a>( <a class="code" href="class_r_c_f_1_1_tcp_endpoint.html">RCF::TcpEndpoint</a>(50001) );</div><div class="line">        subParms.<a class="code" href="class_r_c_f_1_1_subscription_parms.html#a1225a53f5fd38c2e705892d2a1f3ede7">setOnSubscriptionDisconnect</a>(&amp;onSubscriptionDisconnected);</div><div class="line"></div><div class="line">        RCF::SubscriptionPtr subscriptionPtr = subServer.createSubscription&lt;I_PrintService&gt;(</div><div class="line">            printService, </div><div class="line">            subParms);</div></div><!-- fragment --><p> To terminate a subscription, destroy the <code>Subscription</code> object, or call <code>Subscription::close()</code>:</p>
<div class="fragment"><div class="line">        subscriptionPtr-&gt;close();</div></div><!-- fragment --><h1><a class="anchor" id="PubSubAccessControl"></a>
Access Control</h1>
<p>Access controls can be applied to publishers, in the form of an access control callback which will be called on the publishing server, for each subscriber attempting to set up a subscription. Similarly to servant binding access controls, publisher access controls can be used to inspect the <code><a class="el" href="class_r_c_f_1_1_rcf_session.html" title="Represents a server side session, associated with a client connection. ">RCF::RcfSession</a></code> of the subscriber connections for any relevant authentication information:</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> onSubscriberConnect(<a class="code" href="class_r_c_f_1_1_rcf_session.html">RCF::RcfSession</a> &amp; session, <span class="keyword">const</span> std::string &amp; topicName)</div><div class="line">{</div><div class="line">    <span class="comment">// Return true to allow access, false otherwise.</span></div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> onSubscriberDisconnect(<a class="code" href="class_r_c_f_1_1_rcf_session.html">RCF::RcfSession</a> &amp; session, <span class="keyword">const</span> std::string &amp; topicName)</div><div class="line">{</div><div class="line">    <span class="comment">// ...</span></div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line">        <a class="code" href="class_r_c_f_1_1_publisher_parms.html">RCF::PublisherParms</a> pubParms;</div><div class="line">        pubParms.<a class="code" href="class_r_c_f_1_1_publisher_parms.html#ade50c27b95d834ed0c9513b59eaa8c5c">setOnSubscriberConnect</a>(onSubscriberConnect);</div><div class="line">        pubParms.<a class="code" href="class_r_c_f_1_1_publisher_parms.html#abecb5adb46c58a098616d18ce246fe20">setOnSubscriberDisconnect</a>(onSubscriberDisconnect);</div><div class="line">        PrintServicePublisherPtr publisher1Ptr = pubServer.createPublisher&lt;I_PrintService&gt;(pubParms);</div></div><!-- fragment --></div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <!--  -->
    <li class="footer">Copyright (C) <a href="http://www.deltavsoft.com">Delta V Software</a> 2023</li>
    <!-- <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li> -->
  </ul>
</div>
                            </div>
        </div>
    </div>
</body>
</html>
